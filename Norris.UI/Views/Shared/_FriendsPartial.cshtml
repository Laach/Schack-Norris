@using Norris.Data.Data.Entities
@using Norris.Data.Models

@model FriendsPartialViewModel


<div>
    <div class="panel-group" id="panel-group-override" role="tablist">
        <div class="panel panel-default" id="panel-override">
            <div class="panel-heading" id="panel-heading-override" role="tab">
                <a href="#games" class="" role="button" data-toggle="collapse"
                   aria-expanded="true" aria-controls="games" onclick="changeIcon('icon1')" id="nav-txt-override">
                    Games <i id="icon1" class="glyphicon glyphicon-minus" aria-hidden="true"></i>
                </a>
            </div>
            <div class="panel-collapse collapse in" role="tabpanel" id="games" aria-labelledby="games" aria-expanded="true">
                <ul class="list-group games">
                    @if (Model.UserGames.Any())
                    {
                        foreach (var game in Model.UserGames)
                        {
                            <a href='@Url.Action("Index", "Game", new { gameId = @game.GameID })' class="playGame">
                                <li class="list-group-item playGame" id="list-group-item-override">
                                    <img src="~/images/pieces/wn.png" style="width:17px;"/>vs. 
                                    <img src="~/images/pieces/bn.png" style="width:17px;"/>@game.OpponentName

                                    @if (game.IsMyTurn)
                                    {
                                        <span class="playGameRight" id="yTurn">Your turn</span>
                                    }
                                    else
                                    {
                                        <span class="playGameRight" id="oTurn">Opponents turn</span>
                                    }

                                </li>
                            </a>
                        }      
                    }
                    else
                    {
                        <li class="list-group-item" id="list-group-item-override">No active games</li>
                    }
                </ul>
            </div>
        </div>
    </div>
    <div class="friends">
        <div class="panel-group" id="panel-group-override" role="tablist">
            <div class="panel panel-default" id="panel-override">
                <div class="panel-heading" id="panel-heading-override" role="tab">
                    <a href="#friendsOnline" class="" role="button" data-toggle="collapse"
                       aria-expanded="true" aria-controls="friendsOnline" onclick="changeIcon('icon2')" id="nav-txt-override">
                        Friends online <i id="icon2" class="glyphicon glyphicon-minus" aria-hidden="true"></i>
                    </a>
                </div>
                <div class="panel-collapse collapse in" role="tabpanel" id="friendsOnline" aria-labelledby="friendsOnline" aria-expanded="true">
                    <ul class="list-group">
                        @if (Model.UserFriends.OnlineFriends.Any())
                        {
                            foreach (var user in Model.UserFriends.OnlineFriends)
                            {
                                <a href='@Url.Action("NewGame", "Game", new { userID = user.Id})' class="playGame">
                                    <li class="list-group-item playGame" id="list-group-item-override">
                                        @user.UserName
                                        <span class="playGameRight">New game</span>
                                    </li>
                                </a>
                            }
                        }
                        else
                        {
                            <li class="list-group-item" id="list-group-item-override">No active friends</li>
                        }
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel-group" role="tablist">
            <div class="panel panel-default" id="panel-override">
                <div class="panel-heading" id="panel-heading-override" role="tab">
                    <a href="#friendsOffline" class="" role="button" data-toggle="collapse"
                       aria-expanded="true" aria-controls="friendsOffline" onclick="changeIcon('icon3')" id="nav-txt-override">
                        Friends offline
                        <i id="icon3" class="glyphicon glyphicon-minus" aria-hidden="true"></i>
                    </a>
                </div>
                <div class="panel-collapse collapse in" role="tabpanel" id="friendsOffline" aria-labelledby="friendsOffline" aria-expanded="true">
                    <ul class="list-group" id="list-group-override">
                        @if (Model.UserFriends.OfflineFriends.Any())
                        {
                            foreach (var user in Model.UserFriends.OfflineFriends)
                            {
                                <a href='@Url.Action("NewGame", "Game", new { userID = user.Id})' class="playGame">
                                    <li class="list-group-item playGame" id="list-group-item-disabled-override">                                 
                                        <div class="flex" id="friends-flex">
                                            <div class="friends-left">
                                                @user.UserName
                                            </div>
                                            <div class="friends-right">
                                                New game
                                            </div>
                                        </div>
                                    </li>                                 
                                </a>                           
                            }
                        }
                        else
                        {
                            <li class="list-group-item" id="list-group-item-override">No active friends</li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>